<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>update things</title>
    <style>
        body { margin: 0; }
        canvas { width: 100%; height: 100% }
    </style>
</head>
<body>
<div id="container"></div>
<script src="85/three.js"></script>
<script src="85/Detector.js"></script>

<script>

    let scene;
    let camera;
    let renderer;
    let plane;
    let clock;
    let mixer;

    const init =  function () {
         scene = new THREE.Scene();
         camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
        camera.position.z = 5;
        camera.position.y = 3;
        camera.lookAt(new THREE.Vector3());


        let light = new THREE.PointLight( 0xffffff, 1, 100 );
        light.position.set( -10, 10, 10 );
        scene.add( light );

        renderer = new THREE.WebGLRenderer();
        renderer.setSize( window.innerWidth, window.innerHeight );
        document.body.appendChild( renderer.domElement );

        clock = new THREE.Clock();



        const loader = new THREE.JSONLoader();
        loader.load('./morphAni.json', function (geometry, materials) {

            let material = materials[ 0 ];
            material.morphTargets = true;

            plane = new THREE.Mesh(geometry, materials);
            plane.rotation.y = Math.PI/2;

//            let clips = geometry.animations;
//            mixer = new THREE.AnimationMixer( plane );
//            let clip = THREE.AnimationClip.findByName( clips, 'Key' );
//            let action = mixer.clipAction( clip );
//            action.play();

            scene.add(plane);

        });

    };


    const animate = function (time) {

        if (mixer) {
            mixer.update(clock.getDelta());
        }
        requestAnimationFrame( animate );
        renderer.render(scene, camera);
    };

    if (Detector.webgl) {
        init();
        animate();
    } else {
        let warning = Detector.getWebGLErrorMessage();
        document.getElementById('container').appendChild(warning);
    }

</script>
</body>
</html>