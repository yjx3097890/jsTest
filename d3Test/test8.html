<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>d3</title>
    <style media="screen">
      path {
        fill: none;
        stroke: black;
        shape-rendering: crispEdges;
      }
    </style>
  </head>
  <body>


    <script src="d3.js" charset="utf-8"></script>
    <script type="text/javascript">

    var width= 960,
    height=500,
    margin = {top: 20, bottom: 20, left: 40, right: 20};
    var random = d3.random.normal(0, 0.2), n=40,
    data = d3.range(n).map(random);

    var x = d3.scale.linear().domain([0, n-1]).range([0, width-margin.left-margin.right]);
    var y = d3.scale.linear().domain([-1,1]).range([height-margin.top-margin.bottom, 0]);

    var xAxis = d3.svg.axis().scale(x).orient('bottom'),
    yAxis= d3.svg.axis().scale(y).orient('left');

    var line = d3.svg.line()
      .x(function (d, i) {
        return x(i);
      })
      .y(function (d, i) {
        return y(d);
      });

    var svg = d3.select('body').append('svg')
    .attr('width', width).attr('height', height)
    .append('g')
    .attr('transform', 'translate('+margin.left+','+margin.top+')');


    svg.append('defs')
    .append('clipPath').attr('id', 'clip')
    .append('rect')
    .attr('width', width-margin.left-margin.right)
    .attr('height', height-margin.top-margin.bottom);

    svg.append('g')
    .attr("class", "x axis")
    .attr('transform', 'translate(0, '+y(0)+')').call(xAxis);
    svg.append('g')
    .attr("class", "y axis")
    .call(yAxis);

    var path = svg.append('g')
    .attr('clip-path', 'url(#clip)')
    .append('path').datum(data)
    .attr('class', 'line')
    .attr('d', line);


    var animate = function () {


      data.push(random());

        path
        .attr('d', line)
       .attr("transform", null)
        .transition()
        .duration(500)
       .ease('linear')

       .attr('transform', 'translate('+ x(-1) +',0)')
        .each('end', animate);
        
        data.shift();

    };

    animate();
    </script>
  </body>
</html>
